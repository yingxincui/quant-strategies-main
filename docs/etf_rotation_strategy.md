# ETF轮动策略（ETF Rotation Strategy）

## 策略概述

ETF轮动策略是一种基于动量因子的资产配置方法，该策略通过定期评估多个ETF的相对强度，选择表现最佳的ETF进行投资。策略核心思想是"追涨"，即买入近期表现最好的资产类别，利用市场趋势性和动量延续性特征获取超额收益。本策略主要应用于不同行业、主题或资产类别的ETF之间进行轮动配置。

## 核心理念

1. **动量因子驱动**：利用价格动量作为主要选股因子，买入强势ETF
2. **定期调仓机制**：按固定时间间隔对ETF池进行动量排名和调仓
3. **集中持仓策略**：只持有排名靠前的少数ETF，提高收益率
4. **风险管理体系**：设置追踪止损和最大回撤限制，控制下行风险
5. **资金管理方法**：根据波动率和风险比例动态调整仓位大小

## 动量指标构建

策略使用简单但有效的动量计算方法：

1. **动量计算**：
   - 使用N日价格变化百分比作为动量指标（默认为20日）
   - 计算公式：Momentum = (当前价格 / N日前价格) - 1

2. **排名机制**：
   - 对所有ETF的动量指标进行排序
   - 选择动量排名最高的前N只ETF（默认为1只）

3. **风险度量**：
   - 使用14日ATR（真实波动幅度均值）评估ETF的波动风险
   - 结合价格百分比设置动态止损线

## 交易规则

1. **调仓频率**：
   - 每隔固定天数（默认30天）进行一次调仓
   - 避免过于频繁交易，减少交易成本

2. **选择标准**：
   - 选择动量最强的前N只ETF（默认为1只）
   - 卖出不再位于前N名的持仓ETF

3. **头寸规模计算**：
   - 基于风险金额确定头寸大小
   - 考虑ATR和价格波动设置风险敞口
   - 调整为100股的整数倍交易单位

4. **交易执行**：
   - 在调仓日同时执行买入和卖出操作
   - 确保每笔交易至少达到最小交易单位（100股）

## 风险控制机制

1. **追踪止损**：
   - 设置百分比追踪止损（默认1.5%）
   - 价格回撤超过最高点一定比例时触发卖出

2. **最大回撤限制**：
   - 当组合回撤超过设定阈值（默认15%）时清仓
   - 避免在大幅下跌行情中持续损失

3. **风险头寸限制**：
   - 单次交易风险敞口不超过总资产的特定比例（默认2%）
   - 根据ETF波动性动态调整持仓规模

4. **资金分配**：
   - 在持有多只ETF时平均分配资金
   - 保留5%现金缓冲用于手续费和滑点

## 参数设置

主要参数包括：

```
# 策略参数
momentum_period: 20     # 动量计算周期
rebalance_interval: 30  # 调仓间隔天数
num_positions: 1        # 持有前N个ETF
risk_ratio: 0.02        # 单次交易风险比率
max_drawdown: 0.15      # 最大回撤限制
trail_percent: 1.5      # 追踪止损百分比
verbose: True           # 是否输出详细日志
```

## 策略逻辑流程

1. **初始化**：
   - 为每个ETF设置动量和ATR指标
   - 记录ETF代码映射关系

2. **调仓检查**：
   - 确认当天是否为调仓日
   - 非调仓日仅检查止损条件

3. **动量排名**：
   - 计算所有ETF的动量指标
   - 按动量值从高到低排序

4. **仓位调整**：
   - 卖出不在排名前列的持仓ETF
   - 买入新进入排名的ETF
   - 计算新购买ETF的头寸大小

5. **风险监控**：
   - 每个交易日检查追踪止损条件
   - 监控总体回撤是否超过限制

6. **交易执行**：
   - 生成买入或卖出订单
   - 记录交易原因和执行情况

## 适用场景

此策略适用于：

1. 不同行业ETF之间的轮动（如科技、金融、消费等）
2. 不同资产类别ETF的配置（如股票、债券、商品等）
3. 不同地区市场ETF的轮动（如A股、港股、美股等）
4. 主题ETF之间的风格轮动（如价值、成长、中小盘等）

## 优势与局限性

**优势**：
- 跟随市场强势板块，利用趋势延续效应
- 交易规则简单明确，易于实施和监控
- 定期调仓减少交易频率和成本
- 风险控制机制能有效限制下行风险

**局限性**：
- 市场反转时可能面临"追涨杀跌"风险
- 频繁的板块轮换可能增加交易成本
- 依赖历史动量数据，无法预测未来走势
- 在横盘震荡市场中表现可能不佳

## 未来优化方向

1. 引入相对强度指标(RSI)作为辅助判断指标
2. 添加波动率因子过滤高风险ETF
3. 考虑价值指标与动量指标相结合
4. 增加择时功能规避市场系统性风险
5. 引入机器学习方法优化ETF选择和权重分配 