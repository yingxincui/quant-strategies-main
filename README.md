# é‡åŒ–äº¤æ˜“ç­–ç•¥å›æµ‹ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Python Backtraderå›æµ‹æ¡†æ¶çš„é‡åŒ–äº¤æ˜“ç­–ç•¥å›æµ‹ç³»ç»Ÿï¼Œä½¿ç”¨ Streamlit æ„å»º Web ç•Œé¢ï¼Œæ”¯æŒå¤šç§äº¤æ˜“ç­–ç•¥çš„å›æµ‹å’Œåˆ†æã€‚
æ³¨ï¼šETFå®ç›˜äº¤æ˜“ä½¿ç”¨ä¸œæ–¹è´¢å¯Œè¯åˆ¸å¯å…æ”¶æ¯ç¬”äº¤æ˜“è‡³å°‘5å…ƒçš„æ‰‹ç»­è´¹ï¼Œæ‰€ä»¥æœ¬ç­–ç•¥å›æµ‹ç³»ç»Ÿåªè®¾ç½®äº†ä½£é‡‘ä¸‡2.5ï¼Œä»¥ä¾¿æ›´å¥½çš„æ¨¡æ‹Ÿå®ç›˜æƒ…å†µã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ æ”¯æŒå¤šç§äº¤æ˜“ç­–ç•¥ï¼Œé‡‡ç”¨å·¥å‚æ¨¡å¼ä¾¿äºæ‰©å±•
- ğŸ“Š å®æ—¶æ•°æ®è·å–ï¼ˆæ”¯æŒ Tushare å’Œ AKShareï¼‰
- ğŸ“ˆ äº¤äº’å¼å›¾è¡¨å±•ç¤ºï¼ˆKçº¿ã€å‡çº¿ã€äº¤æ˜“ç‚¹ä½ç­‰ï¼‰
- ğŸ’¹ è¯¦ç»†çš„å›æµ‹æŒ‡æ ‡ï¼ˆå¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€èƒœç‡ç­‰ï¼‰
- ğŸ”„ T+1 äº¤æ˜“è§„åˆ™æ”¯æŒ
- âš ï¸ é£é™©æ§åˆ¶ï¼ˆè¿½è¸ªæ­¢æŸã€æœ€å¤§å›æ’¤é™åˆ¶ç­‰ï¼‰
- ğŸ’° ç²¾ç¡®çš„äº¤æ˜“è´¹ç”¨è®¡ç®—ï¼ˆä½£é‡‘ç­‰ï¼‰
- ğŸ“ å®Œæ•´çš„äº¤æ˜“æ—¥å¿—

## åŠŸèƒ½æˆªå›¾
![image](https://github.com/user-attachments/assets/0af62636-dd11-44d5-8e8d-775db56df64e)

## å†…ç½®ç­–ç•¥

### åŒå‡çº¿ç­–ç•¥
- ä½¿ç”¨å¿«é€Ÿå’Œæ…¢é€Ÿç§»åŠ¨å¹³å‡çº¿çš„äº¤å‰äº§ç”Ÿäº¤æ˜“ä¿¡å·
- æ”¯æŒè¿½è¸ªæ­¢æŸè¿›è¡Œé£é™©æ§åˆ¶
- åŸºäº ATR åŠ¨æ€è®¡ç®—æŒä»“è§„æ¨¡

### å¸‚åœºæƒ…ç»ªç­–ç•¥
- åŸºäºå¸‚åœºæƒ…ç»ªæŒ‡æ ‡è¿›è¡Œäº¤æ˜“ï¼Œåœ¨æç«¯æƒ…ç»ªæ—¶å…¥åœº
- ä½¿ç”¨ EMA è¶‹åŠ¿ç¡®è®¤ï¼Œè¦æ±‚ä»·æ ¼å’Œ EMA åŒæ­¥ä¸Šæ¶¨
- åŠ¨æ€è°ƒæ•´ ATR æ­¢ç›ˆå€æ•°ï¼Œç»“åˆå¸ƒæ—å¸¦æ³¢åŠ¨ç‡å’Œæƒ…ç»ªå› å­
- åˆ†å±‚å»ºä»“ï¼Œåœ¨ä¸åŒæƒ…ç»ªé˜ˆå€¼å¢åŠ ä»“ä½
- æ”¯æŒè¿½è¸ªæ­¢æŸå’Œæœ€å¤§å›æ’¤é™åˆ¶

## å®‰è£…ä½¿ç”¨

1. å…‹éš†ä»“åº“ï¼š
```bash
git clone https://github.com/sencloud/ETF-Strategies.git
cd ETF-Strategies
```

2. å®‰è£…ä¾èµ–ï¼Œä½¿ç”¨minicondaï¼š
```bash
# pipè®¾ç½®æº
pip config set global.index-url https://mirrors.aliyun.com/pypi/simple
pip config set install.trusted-host mirrors.aliyun.com
conda create -n etf python=3.10
conda activate etf
pip install -r requirements.txt
```

3. å®‰è£…TA-libï¼š
```bash
conda install -c conda-forge ta-lib
```

4. è¿è¡Œç³»ç»Ÿï¼š
```bash
streamlit run app.py
```

## ç³»ç»Ÿè¦æ±‚

- Python 3.10+
- ä¾èµ–åŒ…ï¼š
  - streamlit
  - backtrader
  - pandas
  - numpy
  - plotly
  - tushare
  - akshare
  - loguru

## ç›®å½•ç»“æ„

```
ETF-Strategies/
â”œâ”€â”€ app.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt       # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ data/             # æ•°æ®åŠ è½½æ¨¡å—
â”‚   â”œâ”€â”€ strategies/       # äº¤æ˜“ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ indicators/       # æŠ€æœ¯æŒ‡æ ‡æ¨¡å—
â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°æ¨¡å—
â””â”€â”€ logs/                # æ—¥å¿—æ–‡ä»¶ç›®å½•
```

## å¦‚ä½•æ·»åŠ æ–°ç­–ç•¥

1. åœ¨ `src/strategies` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç­–ç•¥ç±»ï¼š
```python
import backtrader as bt

class YourStrategy(bt.Strategy):
    params = (
        # å®šä¹‰ç­–ç•¥å‚æ•°
    )
    
    def __init__(self):
        # åˆå§‹åŒ–ç­–ç•¥
        pass
        
    def next(self):
        # å®ç°äº¤æ˜“é€»è¾‘
        pass
```

2. åœ¨ `strategy_factory.py` ä¸­æ³¨å†Œç­–ç•¥ï¼š
```python
from .your_strategy import YourStrategy
StrategyFactory.register_strategy("ç­–ç•¥åç§°", YourStrategy)
```

3. åœ¨ `app.py` ä¸­ä¿®æ”¹æ·»åŠ ç­–ç•¥éœ€è¦çš„å‚æ•°ï¼Œå¦‚ä¸‹ç¤ºæ„ï¼š
```python
# ç§»åŠ¨å¹³å‡çº¿å‚æ•°ï¼ˆä»…åœ¨é€‰æ‹©åŒå‡çº¿ç­–ç•¥æ—¶æ˜¾ç¤ºï¼‰
if strategy_name == "åŒå‡çº¿ç­–ç•¥":
    st.subheader("å‡çº¿å‚æ•°")
    col1, col2 = st.columns(2)
    with col1:
        fast_period = st.number_input("å¿«çº¿å‘¨æœŸ", value=10, min_value=1)
    with col2:
        slow_period = st.number_input("æ…¢çº¿å‘¨æœŸ", value=30, min_value=1)
...
# å¦‚æœæ˜¯åŒå‡çº¿ç­–ç•¥ï¼Œæ·»åŠ ç‰¹å®šå‚æ•°
if strategy_name == "åŒå‡çº¿ç­–ç•¥":
    strategy_params.update({
        'fast_period': fast_period,
        'slow_period': slow_period,
    })
...
```

## å›æµ‹æŒ‡æ ‡è¯´æ˜

- æ€»æ”¶ç›Šç‡ï¼šç­–ç•¥æœ€ç»ˆæ”¶ç›Šç›¸å¯¹äºåˆå§‹èµ„é‡‘çš„ç™¾åˆ†æ¯”
- å¤æ™®æ¯”ç‡ï¼šè¶…é¢æ”¶ç›Šç›¸å¯¹äºæ³¢åŠ¨ç‡çš„æ¯”ç‡
- æœ€å¤§å›æ’¤ï¼šç­–ç•¥æ‰§è¡ŒæœŸé—´çš„æœ€å¤§äºæŸç™¾åˆ†æ¯”
- èƒœç‡ï¼šç›ˆåˆ©äº¤æ˜“å æ€»äº¤æ˜“æ¬¡æ•°çš„æ¯”ä¾‹
- ç›ˆäºæ¯”ï¼šå¹³å‡ç›ˆåˆ©äº¤æ˜“é¢ä¸å¹³å‡äºæŸäº¤æ˜“é¢çš„æ¯”å€¼
- ç³»ç»Ÿè´¨é‡æŒ‡æ•°(SQN)ï¼šè¡¡é‡äº¤æ˜“ç³»ç»Ÿçš„ç¨³å®šæ€§

## é£é™©æç¤º

æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚ä½¿ç”¨æœ¬ç³»ç»Ÿè¿›è¡Œå®ç›˜äº¤æ˜“éœ€è¦è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚

## å…¶ä»–
å¦‚æœä½ å–œæ¬¢æˆ‘çš„é¡¹ç›®ï¼Œå¯ä»¥ç»™æˆ‘ä¹°æ¯å’–å•¡ï¼š
<img src="https://github.com/user-attachments/assets/e75ef971-ff56-41e5-88b9-317595d22f81" alt="image" width="300" height="300">

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## è®¸å¯è¯

MIT License
